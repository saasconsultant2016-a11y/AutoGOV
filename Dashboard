<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoGOV - Level 5 MDM</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <!-- Custom Tailwind Config for #ab1945 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fdf2f4',
                            100: '#fce7eb',
                            200: '#f8d0d9',
                            300: '#f2aab8',
                            400: '#e9768e',
                            500: '#ab1945', // Primary Brand Color
                            600: '#8e1236',
                            700: '#750f2d',
                            800: '#621028',
                            900: '#531025',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'spin-slow': 'spin 3s linear infinite',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* Light Mode Glass Panel */
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8); /* slate-200 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        
        .agent-node {
            transition: all 0.3s ease;
        }
        .agent-node:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 25px -5px rgba(171, 25, 69, 0.15); /* Brand Glow Light */
            border-color: #ab1945;
        }

        /* Custom scrollbar for webkit */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Mock Data Generators ---
        const generateAuditLog = () => [
            { id: 'EVT-9921', time: '10:42:01', entity: 'James Smith', action: 'SELF_CORRECT', details: 'Resolver confidence 60% -> Reflector Approved (Email Sim 0.88)', status: 'success' },
            { id: 'EVT-9922', time: '10:42:05', entity: 'Maria Garcia', action: 'AUTO_MERGE', details: 'Exact Match on Name + Phone', status: 'success' },
            { id: 'EVT-9923', time: '10:43:12', entity: 'Wei Chen', action: 'MEMORY_HIT', details: 'Recall from Vector DB (Similarity 0.99)', status: 'info' },
            { id: 'EVT-9924', time: '10:44:00', entity: 'Robert Jones', action: 'QUARANTINE', details: 'Reflector Objection: Geo-conflict detected', status: 'warning' },
            { id: 'EVT-9925', time: '10:45:30', entity: 'L. Brown', action: 'SELF_CORRECT', details: 'Resolver missed typo -> Reflector caught context', status: 'success' },
        ];

        const generateQuarantineItems = () => [
            {
                id: 'Q-101',
                score: 0.45,
                reason: 'Reflector Disagreement: Email Domains differ drastically',
                recordA: { name: 'William Harris', email: 'bill.harris@corp.com', phone: '555-0192', source: 'CRM', role: 'Director' },
                recordB: { name: 'Will Harris', email: 'billyh@gmail.com', phone: '555-0199', source: 'Marketing', role: 'Lead' }
            },
            {
                id: 'Q-102',
                score: 0.52,
                reason: 'Ambiguous: Phonetic Match but different States',
                recordA: { name: 'Sarah Connor', email: 's.connor@sky.net', phone: '213-555-0100', source: 'Legacy DB', state: 'CA' },
                recordB: { name: 'Sara O\'Connor', email: 'sarah.c@tech.io', phone: '213-555-0100', source: 'Web Form', state: 'NY' }
            }
        ];

        // --- Components ---

        const StatCard = ({ title, value, sub, icon, color, trendColor }) => {
            // Mapping generic colors to specific Tailwind classes for light mode
            // Using brand color heavily as requested
            let iconColorClass = 'text-brand-500';
            let bgColorClass = 'text-brand-500';
            let subColorClass = 'text-brand-600';
            
            if (color === 'blue') { iconColorClass = 'text-blue-500'; subColorClass = 'text-blue-600'; }
            if (color === 'green') { iconColorClass = 'text-green-600'; subColorClass = 'text-green-600'; }
            if (color === 'emerald') { iconColorClass = 'text-emerald-600'; subColorClass = 'text-emerald-600'; }

            if (trendColor === 'green') { subColorClass = 'text-green-600'; }

            return (
                <div className="glass-panel p-6 rounded-2xl flex items-start justify-between relative overflow-hidden group hover:shadow-lg transition-all border border-slate-200">
                    <div className={`absolute top-0 right-0 p-4 opacity-30 group-hover:opacity-40 transition-opacity ${iconColorClass}`}>
                        <i className={`ph ${icon} text-6xl`}></i>
                    </div>
                    <div>
                        <p className="text-slate-500 text-sm font-medium mb-1">{title}</p>
                        <h3 className="text-3xl font-bold text-slate-800 mb-2">{value}</h3>
                        <p className={`text-xs ${subColorClass} font-mono flex items-center gap-1 font-semibold`}>
                            <i className="ph ph-trend-up"></i> {sub}
                        </p>
                    </div>
                </div>
            );
        };

        const AgentNode = ({ name, role, status, activity }) => (
            <div className="agent-node glass-panel p-4 rounded-xl border-l-4 border-brand-500 bg-white">
                <div className="flex justify-between items-start mb-2">
                    <div className="flex items-center gap-2">
                        <div className="w-2 h-2 rounded-full bg-brand-500 animate-pulse"></div>
                        <h4 className="font-semibold text-slate-800">{name}</h4>
                    </div>
                    <span className="text-xs bg-slate-100 px-2 py-1 rounded text-slate-500 border border-slate-200">{role}</span>
                </div>
                <p className="text-xs text-slate-500 mb-3">{activity}</p>
                <div className="w-full bg-slate-100 h-1 rounded-full overflow-hidden">
                    {/* Changed from bg-brand-500 to bg-green-500 per request */}
                    <div className="bg-green-500 h-full w-3/4 animate-pulse-slow"></div>
                </div>
            </div>
        );

        const QuarantineCard = ({ item, onResolve }) => (
            <div className="glass-panel rounded-xl overflow-hidden mb-6 border border-slate-200 shadow-sm">
                <div className="bg-brand-50 p-3 border-b border-brand-100 flex justify-between items-center">
                    <div className="flex items-center gap-2 text-brand-700">
                        <i className="ph ph-warning-circle text-xl text-brand-500"></i>
                        <span className="font-mono text-sm font-bold">ID: {item.id}</span>
                        <span className="text-xs bg-white px-2 py-0.5 rounded border border-brand-200 text-brand-600 font-medium">{item.reason}</span>
                    </div>
                    <span className="font-mono text-xs text-slate-500 font-medium">Confidence: {(item.score * 100).toFixed(0)}%</span>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-0">
                    {/* Record A */}
                    <div className="p-6 border-r border-slate-200 bg-white">
                        <h5 className="text-xs uppercase tracking-wider text-slate-400 mb-4 font-bold flex items-center gap-2">
                            <span className="w-2 h-2 bg-slate-300 rounded-full"></span> Incoming Record (A)
                        </h5>
                        <div className="space-y-3">
                            <div><label className="text-xs text-slate-400 block">Name</label><span className="text-slate-800 font-semibold">{item.recordA.name}</span></div>
                            <div><label className="text-xs text-slate-400 block">Email</label><span className="text-slate-600 font-mono text-sm">{item.recordA.email}</span></div>
                            <div className="grid grid-cols-2 gap-2">
                                <div><label className="text-xs text-slate-400 block">Phone</label><span className="text-slate-600 text-sm">{item.recordA.phone}</span></div>
                                <div><label className="text-xs text-slate-400 block">Source</label><span className="text-slate-600 text-sm">{item.recordA.source}</span></div>
                            </div>
                        </div>
                    </div>

                    {/* Record B */}
                    <div className="p-6 bg-slate-50 relative">
                        <div className="absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white border border-slate-200 shadow-sm rounded-full p-1 z-10 text-slate-400">
                            <i className="ph ph-arrows-left-right"></i>
                        </div>
                        <h5 className="text-xs uppercase tracking-wider text-slate-400 mb-4 font-bold flex items-center gap-2">
                            <span className="w-2 h-2 bg-brand-200 rounded-full"></span> Existing Record (B)
                        </h5>
                        <div className="space-y-3">
                            <div>
                                <label className="text-xs text-slate-400 block">Name</label>
                                <span className={`font-semibold ${item.recordA.name === item.recordB.name ? 'text-green-600' : 'text-brand-600'}`}>
                                    {item.recordB.name}
                                </span>
                            </div>
                            <div>
                                <label className="text-xs text-slate-400 block">Email</label>
                                <span className={`font-mono text-sm ${item.recordA.email === item.recordB.email ? 'text-green-600' : 'text-brand-600'}`}>
                                    {item.recordB.email}
                                </span>
                            </div>
                            <div className="grid grid-cols-2 gap-2">
                                <div><label className="text-xs text-slate-400 block">Phone</label><span className="text-slate-600 text-sm">{item.recordB.phone}</span></div>
                                <div><label className="text-xs text-slate-400 block">Source</label><span className="text-slate-600 text-sm">{item.recordB.source}</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="p-4 bg-slate-50 flex justify-end gap-3 border-t border-slate-200">
                    <button onClick={() => onResolve(item.id, 'reject')} className="px-4 py-2 rounded-lg text-sm font-medium text-slate-600 hover:bg-white hover:text-slate-900 border border-slate-300 hover:shadow-sm transition-all">
                        Distinct Entities (No Match)
                    </button>
                    <button onClick={() => onResolve(item.id, 'merge')} className="px-4 py-2 rounded-lg text-sm font-medium bg-brand-500 hover:bg-brand-600 text-white shadow-md shadow-brand-500/20 transition-all border border-transparent">
                        Force Merge
                    </button>
                </div>
            </div>
        );

        // --- Main App ---

        const App = () => {
            const [view, setView] = useState('dashboard');
            const [quarantineList, setQuarantineList] = useState(generateQuarantineItems());
            const [auditLog, setAuditLog] = useState(generateAuditLog());

            // Simulation of live stats
            const [stats, setStats] = useState({
                processed: 10420,
                auto: 10390,
                autonomy: 99.71
            });

            useEffect(() => {
                const interval = setInterval(() => {
                    setStats(prev => ({
                        processed: prev.processed + Math.floor(Math.random() * 5),
                        auto: prev.auto + Math.floor(Math.random() * 5),
                        autonomy: 99.00 + (Math.random() * 0.9)
                    }));
                }, 2000);
                return () => clearInterval(interval);
            }, []);

            const handleResolve = (id, action) => {
                setQuarantineList(prev => prev.filter(item => item.id !== id));
                // Add to audit log
                const item = quarantineList.find(i => i.id === id);
                const newLog = {
                    id: `MAN-${Math.floor(Math.random() * 10000)}`,
                    time: new Date().toLocaleTimeString(),
                    entity: item.recordA.name,
                    action: action === 'merge' ? 'MANUAL_MERGE' : 'MANUAL_REJECT',
                    details: `Human Steward resolved Quarantine ${item.id}`,
                    status: 'info'
                };
                setAuditLog(prev => [newLog, ...prev]);
            };

            return (
                <div className="flex h-screen overflow-hidden bg-slate-50">
                    {/* Sidebar */}
                    <div className="w-64 bg-white border-r border-slate-200 flex flex-col z-20 shadow-sm">
                        <div className="p-6 border-b border-slate-100 flex items-center gap-3">
                            <div className="w-8 h-8 rounded bg-brand-500 flex items-center justify-center text-white font-bold shadow-md shadow-brand-500/30">A</div>
                            <span className="font-bold text-lg tracking-tight text-slate-800">AutoGOV</span>
                        </div>
                        
                        <nav className="flex-1 p-4 space-y-2">
                            <button 
                                onClick={() => setView('dashboard')}
                                className={`w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-colors ${view === 'dashboard' ? 'bg-brand-50 text-brand-600 border border-brand-100 font-medium' : 'text-slate-500 hover:bg-slate-50 hover:text-slate-800'}`}
                            >
                                <i className="ph ph-squares-four text-xl"></i>
                                <span className="text-sm">Mission Control</span>
                            </button>
                            <button 
                                onClick={() => setView('quarantine')}
                                className={`w-full text-left px-4 py-3 rounded-xl flex items-center justify-between transition-colors ${view === 'quarantine' ? 'bg-brand-50 text-brand-600 border border-brand-100 font-medium' : 'text-slate-500 hover:bg-slate-50 hover:text-slate-800'}`}
                            >
                                <div className="flex items-center gap-3">
                                    <i className="ph ph-shield-warning text-xl"></i>
                                    <span className="text-sm">Quarantine</span>
                                </div>
                                {quarantineList.length > 0 && (
                                    <span className="bg-brand-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm">{quarantineList.length}</span>
                                )}
                            </button>
                            <button 
                                onClick={() => setView('audit')}
                                className={`w-full text-left px-4 py-3 rounded-xl flex items-center gap-3 transition-colors ${view === 'audit' ? 'bg-brand-50 text-brand-600 border border-brand-100 font-medium' : 'text-slate-500 hover:bg-slate-50 hover:text-slate-800'}`}
                            >
                                <i className="ph ph-scroll text-xl"></i>
                                <span className="text-sm">Agent Log</span>
                            </button>
                        </nav>

                        <div className="p-4 border-t border-slate-100 bg-slate-50/50">
                            <div className="flex items-center gap-3 px-2">
                                <div className="w-8 h-8 rounded-full bg-slate-200 border border-slate-300 flex items-center justify-center text-xs font-bold text-slate-600">JD</div>
                                <div>
                                    <p className="text-sm font-semibold text-slate-800">John Doe</p>
                                    <p className="text-xs text-slate-500">Data Steward Lead</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="flex-1 flex flex-col bg-[#f8fafc] relative overflow-hidden">
                        {/* Background Gradients (Subtle for light mode) */}
                        <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
                            <div className="absolute top-[-10%] right-[-5%] w-96 h-96 bg-brand-500/5 rounded-full blur-3xl"></div>
                            <div className="absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"></div>
                        </div>

                        {/* Top Bar */}
                        <header className="h-16 border-b border-slate-200 bg-white/80 backdrop-blur-md z-10 flex items-center justify-between px-8 shadow-sm">
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                                <span className="text-xs text-slate-500 font-bold tracking-wide">SYSTEM: AUTONOMOUS</span>
                            </div>
                            <div className="flex items-center gap-4">
                                <button className="p-2 text-slate-400 hover:text-brand-500 transition-colors"><i className="ph ph-bell text-xl"></i></button>
                                <button className="p-2 text-slate-400 hover:text-slate-800 transition-colors"><i className="ph ph-gear text-xl"></i></button>
                            </div>
                        </header>

                        {/* Scrollable Area */}
                        <main className="flex-1 overflow-y-auto p-8 z-10">
                            
                            {view === 'dashboard' && (
                                <div className="space-y-8 animate-fade-in">
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                        <StatCard title="Autonomy Score" value={`${stats.autonomy.toFixed(2)}%`} sub="+0.4% this week" icon="ph-cpu" color="brand" trendColor="green" />
                                        <StatCard title="Records Processed" value={stats.processed.toLocaleString()} sub="5.8M / hr Pace" icon="ph-database" color="blue" />
                                        <StatCard title="Auto-Resolved" value={stats.auto.toLocaleString()} sub="Zero Human Touch" icon="ph-check-circle" color="green" />
                                        <StatCard title="Cost Savings" value="$45.12" sub="vs $2,800 Manual" icon="ph-currency-dollar" color="emerald" />
                                    </div>

                                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                        <div className="lg:col-span-2 glass-panel rounded-2xl p-6">
                                            <div className="flex justify-between items-center mb-6">
                                                <h3 className="text-lg font-bold text-slate-800">Active Agents</h3>
                                                <button className="text-brand-600 text-sm hover:underline font-medium">View Topology</button>
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <AgentNode name="Resolver Agent" role="Decision Engine" status="active" activity="Computing Jaccard Sim on Batch #9921" />
                                                <AgentNode name="Reflector Agent" role="Self-Correction" status="active" activity="Reviewing 4 ambiguous clusters" />
                                                <AgentNode name="Memory Bank" role="Vector Store" status="active" activity="Indexing 10k new vectors" />
                                                <AgentNode name="Supervisor" role="Orchestrator" status="active" activity="Managing Throughput (5.8M rec/hr)" />
                                            </div>
                                        </div>

                                        <div className="glass-panel rounded-2xl p-6">
                                            <h3 className="text-lg font-bold mb-4 text-slate-800">Quarantine Health</h3>
                                            <div className="flex flex-col items-center justify-center py-8">
                                                <div className="w-32 h-32 rounded-full border-4 border-slate-100 flex items-center justify-center relative shadow-inner">
                                                    <div className="absolute inset-0 rounded-full border-4 border-brand-500 border-t-transparent animate-spin-slow" style={{transform: 'rotate(-45deg)'}}></div>
                                                    <span className="text-3xl font-bold text-slate-800">{quarantineList.length}</span>
                                                </div>
                                                <p className="mt-4 text-slate-500 text-sm text-center">Items awaiting review</p>
                                                <button onClick={() => setView('quarantine')} className="mt-6 px-4 py-2 bg-slate-800 hover:bg-slate-900 text-white rounded-lg text-sm transition-colors shadow-lg shadow-slate-200">
                                                    Clear Queue
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {view === 'quarantine' && (
                                <div className="max-w-4xl mx-auto animate-fade-in">
                                    <div className="flex justify-between items-end mb-6">
                                        <div>
                                            <h2 className="text-2xl font-bold text-slate-800">Quarantine Queue</h2>
                                            <p className="text-slate-500 text-sm">Review ambiguous pairs where Reflector Agent was uncertain.</p>
                                        </div>
                                        <div className="text-right">
                                            <span className="text-2xl font-bold text-brand-600">{quarantineList.length}</span>
                                            <p className="text-xs text-slate-400 uppercase font-bold">Pending</p>
                                        </div>
                                    </div>

                                    {quarantineList.length === 0 ? (
                                        <div className="glass-panel p-12 rounded-2xl text-center">
                                            <div className="w-16 h-16 bg-green-50 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-100">
                                                <i className="ph ph-check text-3xl"></i>
                                            </div>
                                            <h3 className="text-xl font-bold text-slate-800 mb-2">All Clear!</h3>
                                            <p className="text-slate-500">No items currently in quarantine. The agent is running autonomously.</p>
                                            <button onClick={() => setView('dashboard')} className="mt-6 text-brand-600 hover:text-brand-700 font-medium">Return to Dashboard</button>
                                        </div>
                                    ) : (
                                        <div>
                                            {quarantineList.map(item => (
                                                <QuarantineCard key={item.id} item={item} onResolve={handleResolve} />
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}

                            {view === 'audit' && (
                                <div className="animate-fade-in">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-6">Agent Trace Log</h2>
                                    <div className="glass-panel rounded-2xl overflow-hidden shadow-sm">
                                        <table className="w-full text-left border-collapse">
                                            <thead>
                                                <tr className="bg-slate-50 border-b border-slate-200 text-slate-500 text-xs uppercase tracking-wider">
                                                    <th className="p-4 font-semibold">Time</th>
                                                    <th className="p-4 font-semibold">Event ID</th>
                                                    <th className="p-4 font-semibold">Entity</th>
                                                    <th className="p-4 font-semibold">Action</th>
                                                    <th className="p-4 font-semibold">Reasoning Trace</th>
                                                </tr>
                                            </thead>
                                            <tbody className="text-sm text-slate-600">
                                                {auditLog.map((log, i) => (
                                                    <tr key={i} className="border-b border-slate-100 hover:bg-slate-50 transition-colors bg-white">
                                                        <td className="p-4 font-mono text-slate-400">{log.time}</td>
                                                        <td className="p-4 font-mono text-brand-600 font-medium">{log.id}</td>
                                                        <td className="p-4 font-medium text-slate-800">{log.entity}</td>
                                                        <td className="p-4">
                                                            <span className={`px-2 py-1 rounded text-xs font-bold border ${
                                                                log.action === 'QUARANTINE' ? 'bg-orange-50 text-orange-600 border-orange-200' :
                                                                log.action === 'SELF_CORRECT' ? 'bg-purple-50 text-purple-600 border-purple-200' :
                                                                log.action.includes('MANUAL') ? 'bg-blue-50 text-blue-600 border-blue-200' :
                                                                'bg-green-50 text-green-600 border-green-200'
                                                            }`}>
                                                                {log.action}
                                                            </span>
                                                        </td>
                                                        <td className="p-4 text-slate-500">{log.details}</td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            )}
                            
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
